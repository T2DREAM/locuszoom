/*! Locuszoom 0.13.0-beta.4 */
var LzWidgetAddons=function(t){var e={};function o(a){if(e[a])return e[a].exports;var n=e[a]={i:a,l:!1,exports:{}};return t[a].call(n.exports,n,n.exports,o),n.l=!0,n.exports}return o.m=t,o.c=e,o.d=function(t,e,a){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)o.d(a,n,function(e){return t[e]}.bind(null,n));return a},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="",o(o.s=7)}([function(t,e){t.exports=d3},function(t,e,o){"use strict";o.d(e,"a",(function(){return r})),o.d(e,"b",(function(){return i})),o.d(e,"c",(function(){return s})),o.d(e,"d",(function(){return u}));var a=o(0);const n=Math.sqrt(3),l={draw(t,e){const o=-Math.sqrt(e/(3*n));t.moveTo(0,2*-o),t.lineTo(-n*o,o),t.lineTo(n*o,o),t.closePath()}};function r(t,e,o){if(e?"string"==typeof e&&(e={default:e}):e={default:""},"string"==typeof t){const a=/\{\{namespace(\[[A-Za-z_0-9]+\]|)\}\}/g;let n,l,r,s;const i=[];for(;null!==(n=a.exec(t));)l=n[0],r=n[1].length?n[1].replace(/(\[|\])/g,""):null,s=o,null!=e&&"object"==typeof e&&void 0!==e[r]&&(s=e[r]+(e[r].length?":":"")),i.push({base:l,namespace:s});for(let e in i)t=t.replace(i[e].base,i[e].namespace)}else if("object"==typeof t&&null!=t){if(void 0!==t.namespace){e=s(e,"string"==typeof t.namespace?{default:t.namespace}:t.namespace)}let a,n;for(let l in t)"namespace"!==l&&(a=r(t[l],e,o),n=r(l,e,o),l!==n&&delete t[l],t[n]=a)}return t}function s(t,e){if("object"!=typeof t||"object"!=typeof e)throw new Error(`LocusZoom.Layouts.merge only accepts two layout objects; ${typeof t}, ${typeof e} given`);for(let o in e){if(!Object.prototype.hasOwnProperty.call(e,o))continue;let a=null===t[o]?"undefined":typeof t[o],n=typeof e[o];if("object"===a&&Array.isArray(t[o])&&(a="array"),"object"===n&&Array.isArray(e[o])&&(n="array"),"function"===a||"function"===n)throw new Error("LocusZoom.Layouts.merge encountered an unsupported property type");"undefined"!==a?"object"!==a||"object"!==n||(t[o]=s(t[o],e[o])):t[o]=i(e[o])}return t}function i(t){return JSON.parse(JSON.stringify(t))}function u(t){if(!t)return null;if("triangledown"===t)return l;const e="symbol"+(t.charAt(0).toUpperCase()+t.slice(1));return a[e]||null}},,,,,,function(t,e,o){"use strict";o.r(e);var a=o(1);const n=["highlight","select","fade","hide"],l=["highlighted","selected","faded","hidden"],r=["unhighlight","deselect","unfade","show"];function s(t){const e=t.Widgets.get("_Button"),o=t.Widgets.get("BaseWidget");const s=function(){const e=t.Layouts.get("tooltip","standard_association",{unnamespaced:!0});return e.html+='<a href="javascript:void(0);" onclick="LocusZoom.getToolTipPlot(this).CovariatesModel.add(LocusZoom.getToolTipData(this));">Condition on Variant</a><br>',e}(),i=function(){const e=t.Layouts.get("toolbar","standard_association",{unnamespaced:!0});return e.widgets.push({type:"covariates_model",button_html:"Model",button_title:"Show and edit covariates currently in model",position:"left"}),e}();t.Widgets.add("covariates_model",class extends o{initialize(){this.parent_plot.state.model=this.parent_plot.state.model||{},this.parent_plot.state.model.covariates=this.parent_plot.state.model.covariates||[],this.parent_plot.CovariatesModel={button:this,add:t=>{const e=this.parent_plot,o=Object(a.b)(t);"object"==typeof t&&"string"!=typeof o.html&&(o.html="function"==typeof t.toHTML?t.toHTML():t.toString());for(let t=0;t<e.state.model.covariates.length;t++)if(JSON.stringify(e.state.model.covariates[t])===JSON.stringify(o))return e;return e.state.model.covariates.push(o),e.applyState(),e.CovariatesModel.updateWidget(),e},removeByIdx:t=>{const e=this.parent_plot;if(void 0===e.state.model.covariates[t])throw new Error("Unable to remove model covariate, invalid index: "+t.toString());return e.state.model.covariates.splice(t,1),e.applyState(),e.CovariatesModel.updateWidget(),e},removeAll:()=>{const t=this.parent_plot;return t.state.model.covariates=[],t.applyState(),t.CovariatesModel.updateWidget(),t},updateWidget:()=>{this.button.update(),this.button.menu.update()}}}update(){return this.button||(this.button=new e(this).setColor(this.layout.color).setHtml(this.layout.button_html).setTitle(this.layout.button_title).setOnclick(()=>{this.button.menu.populate()}),this.button.menu.setPopulate(()=>{const t=this.button.menu.inner_selector;if(t.html(""),void 0!==this.parent_plot.state.model.html&&t.append("div").html(this.parent_plot.state.model.html),this.parent_plot.state.model.covariates.length){t.append("h5").html(`Model Covariates (${this.parent_plot.state.model.covariates.length})`);const e=t.append("table");this.parent_plot.state.model.covariates.forEach((t,o)=>{const a="object"==typeof t&&"string"==typeof t.html?t.html:t.toString(),n=e.append("tr");n.append("td").append("button").attr("class","lz-toolbar-button lz-toolbar-button-"+this.layout.color).style("margin-left","0em").on("click",()=>this.parent_plot.CovariatesModel.removeByIdx(o)).html("×"),n.append("td").html(a)}),t.append("button").attr("class","lz-toolbar-button lz-toolbar-button-"+this.layout.color).style("margin-left","4px").html("× Remove All Covariates").on("click",()=>this.parent_plot.CovariatesModel.removeAll())}else t.append("i").html("no covariates in model")}),this.button.preUpdate=()=>{let t="Model";const e=this.parent_plot.state.model.covariates.length;if(e){t+=` (${e} ${e>1?"covariates":"covariate"})`}this.button.setHtml(t).disable(!1)},this.button.show()),this}}),t.Widgets.add("data_layers",class extends o{update(){return"string"!=typeof this.layout.button_html&&(this.layout.button_html="Data Layers"),"string"!=typeof this.layout.button_title&&(this.layout.button_title="Manipulate Data Layers (sort, dim, show/hide, etc.)"),this.button||(this.button=new e(this).setColor(this.layout.color).setHtml(this.layout.button_html).setTitle(this.layout.button_title).setOnclick(()=>{this.button.menu.populate()}),this.button.menu.setPopulate(()=>{this.button.menu.inner_selector.html("");const t=this.button.menu.inner_selector.append("table");return this.parent_panel.data_layer_ids_by_z_index.slice().reverse().forEach((e,o)=>{const a=this.parent_panel.data_layers[e],s="string"!=typeof a.layout.name?a.id:a.layout.name,i=t.append("tr");i.append("td").html(s),this.layout.statuses.forEach(t=>{const e=l.indexOf(t),o=n[e];let s,u,d;a.global_statuses[t]?(s=r[e],u=`un${o}AllElements`,d="-highlighted"):(s=n[e],u=o+"AllElements",d=""),i.append("td").append("a").attr("class",`lz-toolbar-button lz-toolbar-button-${this.layout.color}${d}`).style("margin-left","0em").on("click",()=>{a[u](),this.button.menu.populate()}).html(s)});const u=0===o,d=o===this.parent_panel.data_layer_ids_by_z_index.length-1,p=i.append("td");p.append("a").attr("class",`lz-toolbar-button lz-toolbar-button-group-start lz-toolbar-button-${this.layout.color}${d?"-disabled":""}`).style("margin-left","0em").on("click",()=>{a.moveBack(),this.button.menu.populate()}).html("▾").attr("title","Move layer down (further back)"),p.append("a").attr("class",`lz-toolbar-button lz-toolbar-button-group-middle lz-toolbar-button-${this.layout.color}${u?"-disabled":""}`).style("margin-left","0em").on("click",()=>{a.moveForward(),this.button.menu.populate()}).html("▴").attr("title","Move layer up (further front)"),p.append("a").attr("class","lz-toolbar-button lz-toolbar-button-group-end lz-toolbar-button-red").style("margin-left","0em").on("click",()=>(confirm(`Are you sure you want to remove the ${s} layer? This cannot be undone.`)&&a.parent.removeDataLayer(e),this.button.menu.populate())).html("×").attr("title","Remove layer")}),this}),this.button.show()),this}}),t.Layouts.add("tooltip","covariates_model_association",s),t.Layouts.add("toolbar","covariates_model_plot",i)}"undefined"!=typeof LocusZoom&&LocusZoom.use(s),e.default=s}]).default;
//# sourceMappingURL=lz-widget-addons.min.js.map