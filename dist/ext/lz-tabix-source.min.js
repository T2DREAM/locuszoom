"use strict";!function(e,t){"function"==typeof define&&define.amd?define(["locuszoom","tabix-reader"],function(e,r){return t(e,r)}):"object"==typeof module&&module.exports?module.exports=t(require("locuszoom"),require("tabix-reader")):(e.LocusZoom.ext.Data||(e.LocusZoom.ext.Data={}),e.LocusZoom.ext.Data.TabixUrlSource=t(e.LocusZoom,e.tabix))}(this,function(e,t){var r=e.Data.Source.extend(function(e){this.parseInit(e),this.enableCache=!0},"TabixUrlSource");return r.prototype.parseInit=function(e){if(!e.parser_func||!e.url_data)throw new Error("Tabix source is missing required configuration options");this.parser=e.parser_func,this.url_data=e.url_data,this.url_tbi=e.url_tbi||this.url_data+".tbi";var r=e.params||{};if(this.params=r,this._overfetch=r.overfetch||0,this._overfetch<0||1<this._overfetch)throw new Error("Overfetch must be specified as a fraction (0-1) of the requested region size");this._reader_promise=t.urlReader(this.url_data,this.url_tbi).catch(function(){throw new Error("Failed to create a tabix reader from the provided URL")})},r.prototype.getCacheKey=function(e){return[e.chr,e.start,e.end,this._overfetch].join("_")},r.prototype.fetchRequest=function(s){var u=this;return new Promise(function(t,o){var e=s.start,r=s.end,i=u._overfetch*(r-e),a=s.start-i,n=s.end+i;u._reader_promise.then(function(e){e.fetch(s.chr,a,n,function(e,r){r&&o(new Error("Could not read requested region. This may indicate an error with the .tbi index.")),t(e)})})})},r.prototype.normalizeResponse=function(e){return e.map(this.parser)},{TabixUrlSource:r}});
//# sourceMappingURL=lz-tabix-source.min.js.map
