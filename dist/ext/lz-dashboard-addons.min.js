"use strict";!function(t,e){"function"==typeof define&&define.amd?define(["locuszoom"],function(t){return e(t)}):"object"==typeof module&&module.exports?module.exports=e(require("locuszoom")):e(t.LocusZoom)}(this,function(h){var t,e;return h.Dashboard.Components.add("covariates_model",function(t){h.Dashboard.Component.apply(this,arguments),this.initialize=function(){this.parent_plot.state.model=this.parent_plot.state.model||{},this.parent_plot.state.model.covariates=this.parent_plot.state.model.covariates||[],this.parent_plot.CovariatesModel={button:this,add:function(t){var e=JSON.parse(JSON.stringify(t));"object"==typeof t&&"string"!=typeof e.html&&(e.html="function"==typeof t.toHTML?t.toHTML():t.toString());for(var o=0;o<this.state.model.covariates.length;o++)if(JSON.stringify(this.state.model.covariates[o])===JSON.stringify(e))return this;return this.state.model.covariates.push(e),this.applyState(),this.CovariatesModel.updateComponent(),this}.bind(this.parent_plot),removeByIdx:function(t){if(void 0===this.state.model.covariates[t])throw new Error("Unable to remove model covariate, invalid index: "+t.toString());return this.state.model.covariates.splice(t,1),this.applyState(),this.CovariatesModel.updateComponent(),this}.bind(this.parent_plot),removeAll:function(){return this.state.model.covariates=[],this.applyState(),this.CovariatesModel.updateComponent(),this}.bind(this.parent_plot),updateComponent:function(){this.button.update(),this.button.menu.update()}.bind(this)}}.bind(this),this.update=function(){return this.button||(this.button=new h.Dashboard.Component.Button(this).setColor(t.color).setHtml(t.button_html).setTitle(t.button_title).setOnclick(function(){this.button.menu.populate()}.bind(this)),this.button.menu.setPopulate(function(){var t=this.button.menu.inner_selector;if(t.html(""),void 0!==this.parent_plot.state.model.html&&t.append("div").html(this.parent_plot.state.model.html),this.parent_plot.state.model.covariates.length){t.append("h5").html("Model Covariates ("+this.parent_plot.state.model.covariates.length+")");var n=t.append("table");this.parent_plot.state.model.covariates.forEach(function(t,e){var o="object"==typeof t&&"string"==typeof t.html?t.html:t.toString(),a=n.append("tr");a.append("td").append("button").attr("class","lz-dashboard-button lz-dashboard-button-"+this.layout.color).style({"margin-left":"0em"}).on("click",function(){this.parent_plot.CovariatesModel.removeByIdx(e)}.bind(this)).html("×"),a.append("td").html(o)}.bind(this)),t.append("button").attr("class","lz-dashboard-button lz-dashboard-button-"+this.layout.color).style({"margin-left":"4px"}).html("× Remove All Covariates").on("click",function(){this.parent_plot.CovariatesModel.removeAll()}.bind(this))}else t.append("i").html("no covariates in model")}.bind(this)),this.button.preUpdate=function(){var t="Model";if(this.parent_plot.state.model.covariates.length){var e=1<this.parent_plot.state.model.covariates.length?"covariates":"covariate";t+=" ("+this.parent_plot.state.model.covariates.length+" "+e+")"}this.button.setHtml(t).disable(!1)}.bind(this),this.button.show()),this}}),h.Dashboard.Components.add("data_layers",function(d){h.Dashboard.Component.apply(this,arguments),this.update=function(){return"string"!=typeof d.button_html&&(d.button_html="Data Layers"),"string"!=typeof d.button_title&&(d.button_title="Manipulate Data Layers (sort, dim, show/hide, etc.)"),this.button||(this.button=new h.Dashboard.Component.Button(this).setColor(d.color).setHtml(d.button_html).setTitle(d.button_title).setOnclick(function(){this.button.menu.populate()}.bind(this)),this.button.menu.setPopulate(function(){this.button.menu.inner_selector.html("");var r=this.button.menu.inner_selector.append("table");return this.parent_panel.data_layer_ids_by_z_index.slice().reverse().forEach(function(t,e){var s=this.parent_panel.data_layers[t],o="string"!=typeof s.layout.name?s.id:s.layout.name,l=r.append("tr");l.append("td").html(o),d.statuses.forEach(function(t){var e,o,a,n=h.DataLayer.Statuses.adjectives.indexOf(t),i=h.DataLayer.Statuses.verbs[n];s.global_statuses[t]?(e=h.DataLayer.Statuses.menu_antiverbs[n],o="un"+i+"AllElements",a="-highlighted"):(e=h.DataLayer.Statuses.verbs[n],o=i+"AllElements",a=""),l.append("td").append("a").attr("class","lz-dashboard-button lz-dashboard-button-"+this.layout.color+a).style({"margin-left":"0em"}).on("click",function(){s[o](),this.button.menu.populate()}.bind(this)).html(e)}.bind(this));var a=0===e,n=e===this.parent_panel.data_layer_ids_by_z_index.length-1,i=l.append("td");i.append("a").attr("class","lz-dashboard-button lz-dashboard-button-group-start lz-dashboard-button-"+this.layout.color+(n?"-disabled":"")).style({"margin-left":"0em"}).on("click",function(){s.moveDown(),this.button.menu.populate()}.bind(this)).html("▾").attr("title","Move layer down (further back)"),i.append("a").attr("class","lz-dashboard-button lz-dashboard-button-group-middle lz-dashboard-button-"+this.layout.color+(a?"-disabled":"")).style({"margin-left":"0em"}).on("click",function(){s.moveUp(),this.button.menu.populate()}.bind(this)).html("▴").attr("title","Move layer up (further front)"),i.append("a").attr("class","lz-dashboard-button lz-dashboard-button-group-end lz-dashboard-button-red").style({"margin-left":"0em"}).on("click",function(){return confirm("Are you sure you want to remove the "+o+" layer? This cannot be undone!")&&s.parent.removeDataLayer(t),this.button.menu.populate()}.bind(this)).html("×").attr("title","Remove layer")}.bind(this)),this}.bind(this)),this.button.show()),this}}),h.Layouts.add("tooltip","covariates_model_association",((t=h.Layouts.get("tooltip","standard_association",{unnamespaced:!0})).html+='<a href="javascript:void(0);" onclick="LocusZoom.getToolTipPlot(this).CovariatesModel.add(LocusZoom.getToolTipData(this));">Condition on Variant</a><br>',t)),h.Layouts.add("dashboard","covariates_model_plot",((e=h.Layouts.get("dashboard","standard_plot",{unnamespaced:!0})).components.push({type:"covariates_model",button_html:"Model",button_title:"Show and edit covariates currently in model",position:"left"}),e)),{}});
//# sourceMappingURL=lz-dashboard-addons.min.js.map
