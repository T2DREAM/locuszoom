/*! Locuszoom 0.13.0-beta.4 */
var LzForestTrack=function(t){var e={};function a(i){if(e[i])return e[i].exports;var s=e[i]={i:i,l:!1,exports:{}};return t[i].call(s.exports,s,s.exports,a),s.l=!0,s.exports}return a.m=t,a.c=e,a.d=function(t,e,i){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},a.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(a.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)a.d(i,s,function(e){return t[e]}.bind(null,s));return i},a.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="",a(a.s=7)}({0:function(t,e){t.exports=d3},7:function(t,e,a){"use strict";a.r(e);var i=a(0);function s(t){const e=t.DataLayers.get("BaseDataLayer"),a={point_size:40,point_shape:"square",color:"#888888",fill_opacity:1,y_axis:{axis:2},id_field:"id",confidence_intervals:{start_field:"ci_start",end_field:"ci_end"}};class s extends e{constructor(e){e=t.Layouts.merge(e,a),super(...arguments)}_getTooltipPosition(t){const e=this.parent.x_scale(t.data[this.layout.x_axis.field]),a=`y${this.layout.y_axis.axis}_scale`,i=this.parent[a](t.data[this.layout.y_axis.field]),s=this.resolveScalableParameter(this.layout.point_size,t.data),r=Math.sqrt(s/Math.PI);return{x_min:e-r,x_max:e+r,y_min:i-r,y_max:i+r}}render(){const t=this._applyFilters(),e=`y${this.layout.y_axis.axis}_scale`;if(this.layout.confidence_intervals&&this.layout.fields.includes(this.layout.confidence_intervals.start_field)&&this.layout.fields.includes(this.layout.confidence_intervals.end_field)){const a=this.svg.group.selectAll("rect.lz-data_layer-forest.lz-data_layer-forest-ci").data(t,t=>t[this.layout.id_field]),i=t=>{let a=this.parent.x_scale(t[this.layout.confidence_intervals.start_field]),i=this.parent[e](t[this.layout.y_axis.field]);return isNaN(a)&&(a=-1e3),isNaN(i)&&(i=-1e3),`translate(${a}, ${i})`},s=t=>this.parent.x_scale(t[this.layout.confidence_intervals.end_field])-this.parent.x_scale(t[this.layout.confidence_intervals.start_field]),r=1;a.enter().append("rect").attr("class","lz-data_layer-forest lz-data_layer-forest-ci").attr("id",t=>this.getElementId(t)+"_ci").attr("transform",`translate(0, ${isNaN(this.parent.layout.height)?0:this.parent.layout.height})`).merge(a).attr("transform",i).attr("width",s).attr("height",r),a.exit().remove()}const a=this.svg.group.selectAll("path.lz-data_layer-forest.lz-data_layer-forest-point").data(t,t=>t[this.layout.id_field]),s=isNaN(this.parent.layout.height)?0:this.parent.layout.height,r=i.symbol().size((t,e)=>this.resolveScalableParameter(this.layout.point_size,t,e)).type((t,e)=>{const a=this.resolveScalableParameter(this.layout.point_shape,t,e),s="symbol"+(a.charAt(0).toUpperCase()+a.slice(1));return i[s]||null});a.enter().append("path").attr("class","lz-data_layer-forest lz-data_layer-forest-point").attr("id",t=>this.getElementId(t)).attr("transform",`translate(0, ${s})`).merge(a).attr("transform",t=>{let a=this.parent.x_scale(t[this.layout.x_axis.field]),i=this.parent[e](t[this.layout.y_axis.field]);return isNaN(a)&&(a=-1e3),isNaN(i)&&(i=-1e3),`translate(${a}, ${i})`}).attr("fill",(t,e)=>this.resolveScalableParameter(this.layout.color,t,e)).attr("fill-opacity",(t,e)=>this.resolveScalableParameter(this.layout.fill_opacity,t,e)).attr("d",r),a.exit().remove(),this.svg.group.on("click.event_emitter",t=>{this.parent.emit("element_clicked",t,!0)}).call(this.applyBehaviors.bind(this))}}t.DataLayers.add("forest",s),t.DataLayers.add("category_forest",class extends s{_getDataExtent(t,e){const a=this.layout.confidence_intervals;if(a&&this.layout.fields.includes(a.start_field)&&this.layout.fields.includes(a.end_field)){const e=t=>+t[a.start_field],s=t=>+t[a.end_field];return[i.min(t,e),i.max(t,s)]}return super._getDataExtent(t,e)}getTicks(t,e){if(!["x","y1","y2"].includes(t))throw new Error("Invalid dimension identifier "+t);if(t==="y"+this.layout.y_axis.axis){const t=this.layout.y_axis.category_field;if(!t)throw new Error(`Layout for ${this.layout.id} must specify category_field`);return this.data.map((e,a)=>({y:a+1,text:e[t]}))}return[]}applyCustomDataMethods(){const t=this.layout.y_axis.field;if(!t)throw new Error(`Layout for ${this.layout.id} must specify yaxis.field`);return this.data=this.data.map((e,a)=>(e[t]=a+1,e)),this.layout.y_axis.floor=0,this.layout.y_axis.ceiling=this.data.length+1,this}})}"undefined"!=typeof LocusZoom&&LocusZoom.use(s),e.default=s}}).default;
//# sourceMappingURL=lz-forest-track.min.js.map